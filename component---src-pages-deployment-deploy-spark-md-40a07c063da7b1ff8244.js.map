{"version":3,"sources":["webpack:///./src/pages/Deployment/Deploy_spark.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-deployment-deploy-spark-md-40a07c063da7b1ff8244.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"C:/Dev/src/spark/docs/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`This page describes how to deploy Spark from the source code onto a Windows machine, either virtual or physical. The instructions are based on Windows Server 2012.`}</p>\n    <h1 {...{\n      \"id\": \"install-prerequisites\"\n    }}>{`Install prerequisites`}</h1>\n    <p>{`Install the following prerequisites.`}</p>\n    <p>{`Please make sure to install IIS first, and ASP.Net 4.6 later. IIS comes with ASP.Net 4.5, and if you do 4.6 first, the IIS installation will break 4.6.`}</p>\n    <h2 {...{\n      \"id\": \"install-internet-information-server-iis\"\n    }}>{`Install Internet Information Server (IIS)`}</h2>\n    <p>{`If you do not already have a recent version of IIS (7 or 8), install it.`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Open Server Manager > Dashboard`}</li>\n      <li parentName=\"ol\">{`Click 'Add roled and features'`}</li>\n      <li parentName=\"ol\">{`Select 'Web Server (IIS)'`}</li>\n      <li parentName=\"ol\">{`Make sure to include Management Tools > Management Service\nYou need this if you want to enable `}<a parentName=\"li\" {...{\n          \"href\": \"http://www.iis.net/learn/publish/using-web-deploy/introduction-to-web-deploy\"\n        }}>{`Web Deploy`}</a>{` for non-administrators.`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"install-web-deploy\"\n    }}>{`Install Web Deploy`}</h2>\n    <ol>\n      <li parentName=\"ol\">{`Download the `}<a parentName=\"li\" {...{\n          \"href\": \"https://www.microsoft.com/web/downloads/platform.aspx\"\n        }}>{`Web Platform Installer`}</a>{` and run it (wpilauncher.exe).`}</li>\n      <li parentName=\"ol\">{`Select 'WebDeploy 3.6 for Hosting Servers'`}</li>\n      <li parentName=\"ol\">{`Install`}</li>\n    </ol>\n    <p>{`Read `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later\"\n      }}>{`more info`}</a>{` about Web Deploy, especially for configuring Web Deploy for non-administrators.`}</p>\n    <h2 {...{\n      \"id\": \"install-aspnet-46\"\n    }}>{`Install ASP.NET 4.6`}</h2>\n    <p>{`If you do not already have it installed, install ASP.NET 4.6 (version 4.5 is not enough).`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Download it from `}<a parentName=\"li\" {...{\n          \"href\": \"http://www.microsoft.com/en-us/download/details.aspx?id=48130\"\n        }}>{`Microsoft`}</a>{`.`}</li>\n      <li parentName=\"ol\">{`Install it by running the just downloaded NDP46-KB3045560-Web.exe.`}</li>\n    </ol>\n    <h2 {...{\n      \"id\": \"install-mongodb\"\n    }}>{`Install MongoDB`}</h2>\n    <p>{`Spark uses MongoDB for storage. Install it as a service. These instructions are based on the `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.mongodb.com/v3.0/tutorial/install-mongodb-on-windows/\"\n      }}>{`MongoDB documentation`}</a>{`.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Download `}<a parentName=\"p\" {...{\n            \"href\": \"https://www.mongodb.com/download-center?jmp=nav#community\"\n          }}>{`MongoDB`}</a>{`, choose the Community Edition, 'Windows Server 2008 R2 and later, with SSL support'.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Run the installer.\nBy default it will be installed in C:\\\\Program Files\\\\MongoDB\\\\Server`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create directories for the database, log files and configuration of Mongo. For example:`}</p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`C:\\\\Spark\\\\MongoDb\\\\Data`}</li>\n          <li parentName=\"ul\">{`C:\\\\Spark\\\\MongoDb\\\\Log`}</li>\n          <li parentName=\"ul\">{`C:\\\\Spark\\\\MongoDb\\\\Config`}</li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a configuration file for MongoDb in the Config directory, name it SparkMongoDB.cfg and add the following to it (adjust to your previously created directories). Please note the indentation: it is relevant (MongoDB uses YAML for this configuration file).`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-yaml\"\n          }}>{`    systemLog:\n        destination: file\n        path: c:\\\\Spark\\\\MongoDB\\\\Log\\\\mongod.log\n    storage:\n        dbPath: c:\\\\Spark\\\\MongoDB\\\\Data\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Run the command below in a Command Window, as Administrator. It will register MongoDB as a Windows Service.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-dosbatch\"\n          }}>{`    c:\\\\Program Files\\\\MongoDB\\\\Server\\\\3.2\\\\bin>mongod.exe --config \"C:\\\\Spark\\\\MongoDB\\\\Config\\\\SparkMongoDB.cfg\" --install\n`}</code></pre>\n      </li>\n    </ol>\n    <h1 {...{\n      \"id\": \"opening-ports\"\n    }}>{`Opening Ports`}</h1>\n    <p>{`If you want to deploy Spark with Web Deploy from within Visual Studio to this machine, you will have to open the relevant ports for it for inbound traffic:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`http (80)`}</li>\n      <li parentName=\"ul\">{`https (443)`}</li>\n      <li parentName=\"ul\">{`WebDeploy (8172)`}</li>\n    </ul>\n    <p>{`Depending on your network configuration you may need to open 8172 locally for outbound traffic.`}</p>\n    <p>{`If you want to manage the MongoDB database remotely, you also have to open:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`27017`}</li>\n    </ul>\n    <p>{`Please take precautions when you do this (refer to MongoDB documentation for further information).`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Configure MongoDB security`}</li>\n      <li parentName=\"ul\">{`Start MongoDB in secure mode`}</li>\n    </ul>\n    <h1 {...{\n      \"id\": \"deploy-spark\"\n    }}>{`Deploy Spark`}</h1>\n    <h2 {...{\n      \"id\": \"by-web-deploy\"\n    }}>{`By Web Deploy`}</h2>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Open Spark.sln in Visual Studio`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Choose Build | Publish Spark`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`On the Profile tab, create a new profile for this Virtual Machine:`}</p>\n          </li>\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`Publish target 'Custom' > choose a name (something that refers to this machine)`}</p>\n          </li>\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`Connection`}</p>\n            <ol parentName=\"li\">\n              <li parentName=\"ol\">{`Publish method: Web Deploy`}</li>\n              <li parentName=\"ol\">{`Server: the ip address of your Virtual Machine`}</li>\n              <li parentName=\"ol\">{`Site name: Default Web Site/spark`}</li>\n              <li parentName=\"ol\">{`User name: login name for your VM`}</li>\n              <li parentName=\"ol\">{`Password: matching the User name`}</li>\n              <li parentName=\"ol\">{`Destination URL: can be left blank`}</li>\n              <li parentName=\"ol\">{`Validate Connection`}</li>\n              <li parentName=\"ol\">{`If the connection does not validate, check with the system administrator if the firewall lets you through.`}</li>\n            </ol>\n          </li>\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`Settings`}</p>\n            <ol parentName=\"li\">\n              <li parentName=\"ol\">{`Configuration: Release`}</li>\n            </ol>\n          </li>\n          <li parentName=\"ol\">\n            <p parentName=\"li\">{`Publish`}</p>\n          </li>\n        </ol>\n      </li>\n    </ol>\n    <h2 {...{\n      \"id\": \"by-web-deploy-package\"\n    }}>{`By Web Deploy Package`}</h2>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Open Spark.sln in Visual Studio`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Choose Build | Publish Spark`}</p>\n        <ol parentName=\"li\">\n          <li parentName=\"ol\">{`On the Profile tab, create a new profile.`}</li>\n          <li parentName=\"ol\">{`Publish target 'Custom' > choose a name (it may or may not refer to this specific machine, since you can deploy the package to other machines as well).`}</li>\n          <li parentName=\"ol\">{`Connection`}<ol parentName=\"li\">\n              <li parentName=\"ol\">{`Publish method: Web Deploy Package`}</li>\n              <li parentName=\"ol\">{`Package location: choose as suitable directory on your disk.`}</li>\n              <li parentName=\"ol\">{`Site name: Default Web Site/spark`}</li>\n            </ol></li>\n          <li parentName=\"ol\">{`Settings`}<ol parentName=\"li\">\n              <li parentName=\"ol\">{`Configuration: Release`}</li>\n            </ol></li>\n          <li parentName=\"ol\">{`Publish`}</li>\n        </ol>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Connect Remote Desktop Manager to your VM, and select the option to make your local disks available to the VM.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`In the VM, open Windows Explorer and copy the deployment package to a local directory on the VM.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Read (from the deployment directory) the Spark.deploy-readme.txt.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Start a Command Window as Administrator and run (from the deployment directory) `}</p>\n        <p parentName=\"li\">{`Spark.deploy.cmd /Y`}</p>\n      </li>\n    </ol>\n    <h1 {...{\n      \"id\": \"check-spark\"\n    }}>{`Check Spark`}</h1>\n    <p>{`Open a browser on the server and try `}<a parentName=\"p\" {...{\n        \"href\": \"http://localhost/spark\"\n      }}>{`http://localhost/spark`}</a></p>\n    <p>{`If that works, try the same from your own machine, with `}<a parentName=\"p\" {...{\n        \"href\": \"http://%5C\"\n      }}>{`http://\\\\`}</a>{`<ip-adress-of-spark-machine`}{`>`}{`/spark`}</p>\n    <h1 {...{\n      \"id\": \"faq\"\n    }}>{`FAQ`}</h1>\n    <h2 {...{\n      \"id\": \"bad-module\"\n    }}>{`Bad Module`}</h2>\n    <p>{`When I first try to open Spark in the browser I get this error:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`Handler \"ExtensionlessUrlHandler-Integrated-4.0\" has a bad module \"ManagedPipelineHandler\" in its module list\n`}</code></pre>\n    <p>{`Something must have gone wrong with installing ASP.Net in IIS. I (Christiaan) had this and solved it by running in a Command Window (as Administrator):`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`dism.exe /Online /Enable-Feature /all /FeatureName:IIS-ASPNET45\n`}</code></pre>\n    <p>{`Source of this fix: `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.microsoft.com/en-us/download/details.aspx?id=44989\"\n      }}>{`https://www.microsoft.com/en-us/download/details.aspx?id=44989`}</a></p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}